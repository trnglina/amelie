{"version":3,"sources":["index-dates.js"],"names":["LastUpdatedIndicator","date","createElement","template","document","replace","trim","firstChild","makeRequest","linkObject","xhttp","XMLHttpRequest","onreadystatechange","this","status","callback","readyState","open","href","send","links","getElementsByClassName","i","length","dummy","innerHTML","getElementsByTagName","j","metaElements","attributes","value"],"mappings":"cAWA,WAsBE,IApBD,IAAAA,EAAM,SAAAC,GACL,IAAMD,EAAAA,SAAuBE,cAAvBF,OAIJ,OAHAG,EAAMA,UAAWC,4CAAAA,OACIH,EAAAI,QAAA,KAAA,KADJD,WACIE,OAEdH,EAASI,YAGZC,EAAc,SAAdA,EAAuBC,GAC3B,IAAMC,EAAQ,IAAIC,eAClBD,EAAME,mBAAqB,WAA3B,GAAMA,KAAAA,YAAgC,KAAXC,KAAAC,QACzBC,EAASC,EAAcH,OAGxBH,EAJDO,KAAA,MAAAR,EAAAS,MAAA,GAMAR,EAAMS,QARRC,EAAAhB,SAAAiB,uBAAA,eAYSC,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IADlCd,EAAcJ,EAAQkB,GAACD,SAAAA,EAAuBX,GAG1C,IAAMc,EAAQpB,SAASF,cAAc,QAFzCsB,EAAUC,UAAUL,EAAMG,SAEtB,IADFf,IAAAA,EAAsBgB,EAAAE,qBAAA,QACTC,EAAGvB,EAAAA,EAAQwB,EAAC1B,OAATyB,IACRF,EAAYf,GAAAA,WAAlB,eAAA,iBAAAkB,EAAAD,GAAAE,WAAA,cAAAC,OACMF,EAAAA,YAAqBF,IAAAA,EAANE,EAArBD,GAAAE,WAAqB,QAArBC,UA1BN","file":"index-dates.js","sourcesContent":["// To the extent possible under law, the author(s) have dedicated all copyright\n// and related and neighbouring rights to this software and all related code\n// files to the public domain worldwide. A copy of the CC0 Public Domain\n// Dedication may be obtained at:\n//\n//     http://creativecommons.org/publicdomain/zero/1.0/\n//\n// Unless required by applicable law or agreed to in writing, this software is\n// distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.\n\n/* eslint-disable require-jsdoc */\n\n(() => {\n  const LastUpdatedIndicator = function(date) {\n    const template = document.createElement('div');\n    template.innerHTML = `\n        <sup class=\"last-updated\">(up. ${date.replace(/-/g, '/')})</sup>`.trim();\n    return template.firstChild;\n  };\n\n  const makeRequest = function(linkObject, callback) {\n    const xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 && this.status == 200) {\n        callback(linkObject, this);\n      }\n    };\n    xhttp.open('GET', linkObject.href, true);\n    xhttp.send();\n  };\n\n  const links = document.getElementsByClassName('update-date');\n  for (let i = 0; i < links.length; i++) {\n    makeRequest(links[i], function(linkObject, xhttp) {\n      const dummy = document.createElement('html');\n      dummy.innerHTML = xhttp.response;\n      const metaElements = dummy.getElementsByTagName('meta');\n      for (let j = 0; j < metaElements.length; j++) {\n        if (metaElements[j].attributes['http-equiv'] && metaElements[j].attributes['http-equiv'].value == 'last-modified') {\n          linkObject.appendChild(new LastUpdatedIndicator(metaElements[j].attributes['content'].value));\n        }\n      }\n    });\n  }\n})();\n"]}